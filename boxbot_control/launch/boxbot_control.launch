<?xml version="1.0"?>

<launch>
  
  <!-- Input arguments -->
  <arg name="sim" default="false"/>
  <arg name="gazebo" default="false"/>
  <arg name="left" default="true"/>
  <arg name="5dof" default="false"/>

  <!-- Launch robot state publisher -->
  <node name="robot_state_pub" pkg="robot_state_publisher" type="robot_state_publisher"/>

  <!-- If running on the real robot -->
  <node unless="$(arg gazebo)" name="arbotix" pkg="arbotix_python" type="arbotix_driver" output="screen">
    <rosparam if="$(arg 5dof)" file="$(find boxbot_control)/config/arm_5dof.yaml"/>
    <rosparam unless="($arg 5dof)" file="$(find boxbot_control/config/arm_6dof.yaml"/>
    <param name="sim" value="$(arg sim)"/>
  </node>

  <node unless="$(arg gazebo)" name="gripper_controller" pkg="arbotix_controllers" type="gripper_controller" output="screen">
    <rosparam file="$(find widowx_arm_bringup)/config/widowx_arm_gripper.yaml" command="load" />
  </node>

  <!-- If simulated (i.e. in Gazebo) -->
  <node if="$(arg gazebo)" name="arbotix" pkg="arbotix_python" type="arbotix_gazebo" output="screen">
    <rosparam if="$(arg 5dof)" file="$(find boxbot_control)/config/arm_5dof.yaml"/>
    <rosparam unless="($arg 5dof)" file="$(find boxbot_control/config/arm_6dof.yaml"/>
    <param name="sim" value="$(arg simulation)"/>
    <param name="left_arm" value="$(arg left)"/>
    <param name="robot" value="boxbot"/>
  </node>

  <node if="$(arg gazebo)" name="gripper_controller" pkg="arbotix_controllers" type="gripper_sim" output="screen">
    <rosparam file="$(find widowx_arm_bringup)/config/widowx_arm_gripper.yaml" command="load" />
  </node>
  
</launch>
